<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5/github-markdown.css">
  <style>
    :root {
      --bg: #0d1117;
      --card: #161b22;
      --border: #30363d;
      --text: #f0f6fc;
      --muted: #9ca3af;
      --accent: #58a6ff;
      --accent-2: #a5a3ff;
      --nav: #000000;
    }

    body.theme-ocean {
      --bg: #0f172a;
      --card: #111827;
      --border: #1f2937;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #22d3ee;
      --accent-2: #a855f7;
      --nav: #0b1222;
    }

    body.theme-blackred {
      --bg: #0a0a0a;
      --card: #111111;
      --border: #222222;
      --text: #f0f0f0;
      --muted: #aaaaaa;
      --accent: #ff4d4d;
      --accent-2: #ff9999;
      --nav: #000000;
    }

    body.theme-github {
      --bg: #0d1117;
      --card: #161b22;
      --border: #30363d;
      --text: #f0f6fc;
      --muted: #9ca3af;
      --accent: #58a6ff;
      --accent-2: #a5a3ff;
      --nav: #000000;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      min-height: 100vh;
    }

    header {
      padding: 42px 20px 28px;
      text-align: center;
      border-bottom: 4px solid var(--accent);
      background: linear-gradient(135deg, var(--nav), var(--bg));
      position: sticky;
      top: 0;
      z-index: 20;
    }

    .pill {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(34, 211, 238, 0.1);
      color: var(--accent);
      font-weight: 700;
      font-size: 12px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }

    h1 {
      margin: 10px 0 6px;
      font-size: 46px;
      font-weight: 900;
      letter-spacing: -0.5px;
      color: var(--accent);
    }

    .subtitle { color: var(--muted); font-size: 18px; margin: 0; }

    nav.top-nav {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 18px;
      background: var(--nav);
      padding: 8px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
    }

    nav.top-nav a {
      color: var(--text);
      text-decoration: none;
      padding: 10px 16px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--card);
      font-weight: 700;
      transition: all 0.2s ease;
    }

    nav.top-nav a.active, nav.top-nav a:hover {
      border-color: var(--accent);
      color: var(--accent);
      box-shadow: 0 10px 30px rgba(34, 211, 238, 0.2);
    }

    .theme-switcher {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      margin-top: 14px;
    }

    .theme-switcher select {
      background: var(--card);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 8px 10px;
      font-weight: 600;
    }

    main {
      max-width: 1200px;
      margin: 30px auto 70px;
      padding: 0 20px;
      display: grid;
      gap: 20px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 20px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.35);
      transition: all 0.2s ease;
    }

    .card.card-link { cursor: pointer; }
    .card.card-link:hover, .card.card-link:focus-visible { border-color: var(--accent); transform: translateY(-4px); outline: none; }
    .card.card-link.active { border-color: var(--accent); box-shadow: 0 12px 40px rgba(34, 211, 238, 0.25); }

    .card h2 { margin: 8px 0 6px; color: var(--accent); font-size: 22px; }
    .card p { margin: 0; color: var(--muted); line-height: 1.6; }

    .workspace {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }

    input, textarea, select {
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      border: 2px solid var(--border);
      border-radius: 12px;
      background: #010409;
      color: var(--text);
      font-size: 16px;
      transition: border 0.3s, box-shadow 0.3s;
    }

    input:focus, textarea:focus, select:focus {
      border-color: var(--accent);
      outline: none;
      box-shadow: 0 0 0 4px rgba(88, 166, 255, 0.2);
    }

    button {
      background: linear-gradient(135deg, #238636, #3fb950);
      color: #fff;
      padding: 16px 32px;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 900;
      cursor: pointer;
      margin: 20px auto;
      display: block;
      box-shadow: 0 8px 20px rgba(59, 149, 80, 0.4);
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 30px rgba(59, 149, 80, 0.6);
    }

    .hit {
      background: rgba(88, 166, 255, 0.1);
      border-left: 6px solid var(--accent);
      padding: 20px;
      margin: 20px 0;
      border-radius: 0 12px 12px 0;
    }

    pre {
      background: #000 !important;
      padding: 20px !important;
      border-radius: 12px;
      border: 1px solid var(--accent);
      overflow-x: auto;
    }

    .panel {
      display: none;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.35);
    }

    .panel.active { display: block; }
    .panel h3 { margin-top: 0; color: var(--accent); }
    .panel p { color: var(--muted); }

    .markdown-body { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 20px; }
    .toc { display: flex; gap: 8px; flex-wrap: wrap; margin: 12px 0 0; }
    .toc a { color: #cbd5e1; text-decoration: none; font-size: 12px; padding: 6px 10px; border-radius: 8px; border: 1px solid var(--border); transition: all 0.2s ease; }
    .toc a:hover { border-color: var(--accent); color: var(--accent); }

    .doorwar-backlog {
      margin: 16px 0;
      padding: 12px;
      border: 1px dashed var(--border);
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.02);
    }

    .doorwar-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 16px;
    }

    .doorwar-quad {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 12px;
      min-height: 160px;
    }

    .doorwar-dropzone {
      min-height: 90px;
      padding: 10px;
      border: 1px dashed var(--border);
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .doorwar-card {
      padding: 8px 10px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: #0f1117;
      cursor: grab;
    }

    .doorwar-card.selected {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px var(--accent);
    }

    footer { text-align: center; padding: 40px 20px; color: #6b7280; font-size: 14px; border-top: 1px solid var(--border); }

    @media (max-width: 720px) {
      h1 { font-size: 34px; }
      nav.top-nav a { width: 100%; text-align: center; }
    }
  </style>
</head>
<body class="theme-github">
 <header>
  <div class="subtitle">"Hit your Four, before the Door, to prepare for War."</div>
</header>

<main>
  <nav class="top-nav" aria-label="Hauptnavigation">
    <a href="#" data-tab="home" class="active">Home</a>
    <a href="#" data-tab="hotlist">Potential</a>
    <a href="#" data-tab="doorwar">Plan</a>
    <a href="#" data-tab="warstack">War Stack</a>
    <a href="#" data-tab="hitlist">Production</a>
    <a href="#" data-tab="profit">Profit</a>
    <a href="#" data-tab="chapters">Chapters</a>
  </nav>

  <section class="workspace">

  <article class="panel active" id="tab-home">
    <?!= include('Door_Chapters'); ?>
    <h3>Door Centre – Quickstart</h3>
    <p>Alles läuft im HQ: War Stack erzeugen, Autosave sichert Drafts, Drive speichert die finalen Markdown-Dateien.</p>
    <ul>
      <li><strong>Storage:</strong> <code>Alpha_Door</code> + Logsheet</li>
      <li><strong>Drafts:</strong> <code>0-Drafts</code> (Bridge → /resume)</li>
      <li><strong>Push:</strong> Telegram bei <code>WARSTACK_TELEGRAM=1</code></li>
    </ul>
  </article>

  <article class="panel" id="tab-hotlist">
    <h3>Hot List</h3>
    <p>Eine Idee pro Zeile erfassen. Beim Speichern landet ein Markdown im Centre-Folder.</p>
    <ul>
      <li>Input: Roh-Ideen</li>
      <li>Output: <code>HotList</code> Markdown</li>
          <!-- HOT LIST -->
          <?!= include('Door_HotList_Panel'); ?>
        <li>Nächster Schritt: Door War</li>
      </ul>
          <li>Input: Hot List Auswahl</li>
          <!-- DOOR WAR -->
          <?!= include('Door_War_Panel'); ?>
        <li>Nächster Schritt: War Stack</li>
  </article>

  <article class="panel" id="tab-doorwar">
    <h3>BATTLE OF CHOICES</h3>
    <p>Amidst the noise of countless ideas, there’s a battlefield where decisions are made.   
    This is the arena where you fight against distractions and determine which actions are truly worth your time and energy.   This battle is what we call The Door War.</p>
        <ul>
              <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script> var markdown = `
**WHAT IS THE DOOR WAR?**  
The Door War isn’t about physical conflict; it’s a struggle with choices, priorities, and focus.   
Your Hot List is full of potential actions, but the real challenge lies in choosing the most important one for the week.   
This decision-making process is what we call The Door War.   
It’s a fight to stay focused on what truly matters, inspired by the time management principles of Stephen Covey and Dwight Eisenhower.

**THE ORIGINS OF THE QUADRANT SYSTEM**  
The quadrant system used in The Door War traces its roots back to President Dwight Eisenhower.   
As a general and later the U.S. President, Eisenhower needed a way to manage countless high-stakes decisions.   
Stephen Covey popularized this system in his book, *The 7 Habits of Highly Effective People*, making it a cornerstone of productivity and management strategies.

**UNDERSTANDING THE QUADRANTS**  
The Time Management Matrix divides tasks into four quadrants based on urgency and importance:  
\- **Quadrant 1: Urgent and Important** – This quadrant often traps people in a cycle of crisis management. It’s all about putting out fires, but constantly living in this zone can prevent growth.  
\- **Quadrant 2: Not Urgent but Important** – This is the sweet spot. Tasks in this quadrant are important but don’t have immediate deadlines. This is where strategic planning and long-term goals come to life.  
 \- **Quadrant 3: Urgent but Not Important** – These tasks create the illusion of urgency. Answering non-essential emails or attending unnecessary meetings fall here, diverting you from what really matters.  
\- **Quadrant 4: Neither Urgent nor Important** – This is the procrastination zone, where time-wasting activities like endless social media scrolling drain your productivity.

**WINNING THE DOOR WAR**  
To win the Door War, you need to focus on Quadrant 2\.   
This is where you make proactive decisions, choosing tasks that are important but not yet urgent. By selecting tasks from this quadrant, you take control of your time and turn these tasks into priorities by choice, not by chance. Each week, when you review your Hot List, you enter the Door War. You must pick one key action from Quadrant 2 to focus on for the week. This chosen action becomes your “Door” for the week, representing your commitment to a task that’s crucial—not because you have to, but because you choose to.

**LIVING BY INTENTION, NOT REACTION**  
By aligning your actions with the Door War strategy and the Quadrant system, you begin to live intentionally. Instead of reacting to whatever comes your way, you make deliberate choices that lead to meaningful progress. This shift is powerful: it moves you from a life controlled by urgent demands to one guided by thoughtful, intentional decisions. The Door War is more than just a weekly strategy—it’s a mindset shift. It reminds you that in the game of life, it’s not about having endless options but about making the right choices. Choose wisely, because these choices shape your future.`;
        </script>
          <li>Input: Hot List Auswahl</li>
           <!-- DOOR WAR -->
           <?!= include('Door_War_Panel'); ?>
          <li>Nächster Schritt: War Stack</li>
        </ul>
           <!-- WAR STACK -->
          <?!= include('Door_WarStack_Panel'); ?>
      </article>

      <article class="panel" id="tab-warstack">
        <h3>War Stack</h3>
        <p>The War Stack helps you map out the path to success, identify the challenges you might face, and create strategies to overcome those challenges. Let’s break down how the War Stack works.</p>
          <!-- WAR STACK -->
        <?!= include('Door_WarStack_Panel'); ?>
        <ul>
         After visualizing the end goal, you’ll identify measurable truths—facts that will confirm you’ve successfully opened the Door.   
          But with every truth comes potential obstacles, and for every obstacle, there’s a strategy to overcome it.   
          This leads us to Facts, Obstacles, and Strategic Strikes.

        <li>Speichert: <code>sessionId_WarStack.md</code></li>
        <li>Benachrichtigt: Telegram Chat via <code>notifyWarStackCreated()</code></li>
        <li>Sheet: Zeile in <code>WarStacks</code> (Status, Recent, Week)</li>

        </ul>

      </article>

      <article class="panel" id="tab-hitlist">
        <h3>Hit List</h3>
        <p>Big Rocks aus War Stacks übernehmen, Little Rocks und Sand ergänzen.</p>
        <ul>
          <li>Input: Hits aus <code>listWarStackHits()</code></li>
          <li>Output: <code>HitList</code> Markdown</li>
          <li>Nächster Schritt: Profit Review</li>
        </ul>
            <!-- HIT LIST -->
        <?!= include('Door_HitList_Panel'); ?>

      </article>

      <article class="panel" id="tab-profit">
        <h3>Profit</h3>
        <p>Weekly Review (Achieved & Done) sichern. Wins feiern, Rolls und Kills definieren.</p>
        <ul>
          <li>Output: <code>Profit</code> Markdown</li>
          <li>Optional: Link zurück zu Hit List für nächste Woche</li>
              <!-- PROFIT -->
    <div id="panel-profit" class="tool-panel">
      <h2>Profit – Achieved &amp; Done</h2>
      <p>Weekly Review: was wurde gehittet, was gerollt, was gefeiert?</p>
      <p><small>Speichert Markdown + JSON nach <code>Alpha_Door/4-Profit</code>.</small></p>

      <label for="profit-door-opened">Did you open the Door?</label>
      <select id="profit-door-opened">
        <option value="">Choose…</option>
        <option value="yes">Yes</option>
        <option value="no">No</option>
      </select>

      <label for="profit-door-obstacle">If no: What blocked you?</label>
      <textarea id="profit-door-obstacle" placeholder="Was hat dich blockiert? (optional)"></textarea>

      <label for="profit-uuid">Profit Task UUID (optional)</label>
      <input id="profit-uuid" placeholder="Taskwarrior Profit UUID">

      <label>Achieved Big Hits (optional)</label>
      <input id="profit-hit-1" placeholder="Hit 1">
      <input id="profit-hit-2" placeholder="Hit 2">
      <input id="profit-hit-3" placeholder="Hit 3">
      <input id="profit-hit-4" placeholder="Hit 4">

      <label for="profit-done">Done List (other wins)</label>
      <textarea id="profit-done" placeholder="One per line…"></textarea>

      <label for="profit-insight">Insight of the Week</label>
      <textarea id="profit-insight" placeholder="Key insight…"></textarea>

      <label for="profit-lesson">Lesson of the Week</label>
      <textarea id="profit-lesson" placeholder="Key lesson…"></textarea>

      <button type="button" onclick="generateProfit()">Profit Review generieren &amp; speichern</button>
      <pre id="profitoutput" style="display:none;"></pre>
      <button type="button" onclick="copyFromPre('profitoutput')">Profit Review kopieren</button>
    </div>

     </article>

      <article class="panel" id="tab-chapters">
        <div class="pill">Docs</div>
        <h3>Chapters 25–31 – The Door</h3>
        <div class="toc" id="doorToc" aria-label="Inhaltsverzeichnis"></div>
        <article class="markdown-body" id="doorChapters"></article>
      </article>
    </section>
  </main>

    <footer>
        <section class="grid" aria-label="Module Auswahl">
      <div class="card card-link active" data-tab="home" tabindex="0">
        <div class="pill">Overview</div>
        <h2>Home</h2>
        <p>Bot, Web App und Drive arbeiten zusammen – starte hier.</p>
      </div>
      <div class="card card-link" data-tab="hotlist" tabindex="0">
        <div class="pill">Potential</div>
        <h2>Hot List</h2>
        <p>Ideen sammeln und als Markdown in den Centre-Folder speichern.</p>
      </div>
      <div class="card card-link" data-tab="doorwar" tabindex="0">
        <div class="pill">Plan</div>
        <h2>Door War</h2>
        <p>Quadrant-2 Entscheidung treffen und deine Domino Door wählen.</p>
      </div>
      <div class="card card-link" data-tab="warstack" tabindex="0">
        <div class="pill">Plan</div>
        <h2>War Stack</h2>
        <p>HQ-Generator mit 4 Hits, Autosave, Telegram Push.</p>
      </div>
      <div class="card card-link" data-tab="hitlist" tabindex="0">
        <div class="pill">Production</div>
        <h2>Hit List</h2>
        <p>Big Rocks, Little Rocks und Sand für die Woche definieren.</p>
      </div>
      <div class="card card-link" data-tab="profit" tabindex="0">
        <div class="pill">Profit</div>
        <h2>Achieved & Done</h2>
        <p>Weekly Review mit Wins, Rolls und Celebrations sichern.</p>
      </div>
      <div class="card card-link" data-tab="chapters" tabindex="0">
        <div class="pill">Docs</div>
        <h2>Chapters 25–31</h2>
        <p>Kapitelübersicht lesen und per ToC direkt zu Abschnitten springen.</p>
      </div>
    </section>

    <div class="theme-switcher">
      <label for="theme-select">Style:</label>
      <select id="theme-select" aria-label="Theme Auswahl">
        <option value="github">GitHub Blue</option>
        <option value="ocean">Teal Pulse</option>
        <option value="blackred">Black / Red</option>
      </select>
    </div>
        <div class="pill">Door Centre Bot</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <?!= include('Door_Client'); ?>
  <script>

    const tabs = document.querySelectorAll('.panel');
    const navLinks = document.querySelectorAll('nav.top-nav a');
    const cards = document.querySelectorAll('.card.card-link');
    const themeSelect = document.getElementById('theme-select');

    function slugify(text) {
      return text
        .toLowerCase()
        .trim()
        .replace(/[^a-z0-9äöüß]+/g, '-')
        .replace(/^-+|-+$/g, '');
    }

    function applyTheme(themeKey = 'github') {
      const body = document.body;
      const classes = ['theme-github', 'theme-ocean', 'theme-blackred'];
      classes.forEach(c => body.classList.remove(c));

      const target = `theme-${themeKey}`;
      body.classList.add(classes.includes(target) ? target : 'theme-github');

      if (themeSelect) {
        themeSelect.value = themeKey;
      }

      try { localStorage.setItem('door_theme', themeKey); } catch (e) {}
    }

    function openTab(tabId) {
      tabs.forEach(p => p.classList.remove('active'));
      navLinks.forEach(a => a.classList.toggle('active', a.dataset.tab === tabId));
      cards.forEach(c => c.classList.toggle('active', c.dataset.tab === tabId));

      const panel = document.getElementById(`tab-${tabId}`);
      if (panel) panel.classList.add('active');

      const url = new URL(window.location);
      url.searchParams.set('tab', tabId);
      history.replaceState(null, '', url.toString());
    }

    function buildToc() {
      const container = document.getElementById('doorChapters');
      const toc = document.getElementById('doorToc');
      toc.innerHTML = '';

      const headings = container.querySelectorAll('h1, h2, h3');
      if (!headings.length) return;

      headings.forEach(h => {
        const id = slugify(h.textContent);
        h.id = id;

        const link = document.createElement('a');
        link.href = `#${id}`;
        link.textContent = h.textContent.replace(/^#+\s*/, '');
        link.addEventListener('click', evt => {
          evt.preventDefault();
          document.getElementById(id)?.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
        toc.appendChild(link);
      });
    }

    // Initial markdown render + ToC
    const chaptersEl = document.getElementById('doorChapters');
    chaptersEl.innerHTML = marked.parse(doorChapters);
    buildToc();

    // Theme wiring
    (function initTheme() {
      let stored = 'github';
      try {
        stored = localStorage.getItem('door_theme') || 'github';
      } catch (e) {}
      applyTheme(stored);
    })();

    themeSelect?.addEventListener('change', () => applyTheme(themeSelect.value));

    // Event wiring for nav + cards (click + keyboard)
    navLinks.forEach(link => {
      link.addEventListener('click', evt => {
        evt.preventDefault();
        openTab(link.dataset.tab);
      });
    });

    cards.forEach(card => {
      card.addEventListener('click', () => openTab(card.dataset.tab));
      card.addEventListener('keydown', evt => {
        if (evt.key === 'Enter' || evt.key === ' ') {
          evt.preventDefault();
          openTab(card.dataset.tab);
        }
      });
    });

    // Set initial tab from ?tab
    (function initFromUrl() {
      const params = new URLSearchParams(window.location.search);
      const tab = params.get('tab');
      if (tab) {
        openTab(tab);
      }
    })();
  </script>
</body>
</html>
